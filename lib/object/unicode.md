# Unicode字符集

标签（空格分隔）： JavaScript语法

---

涵盖世界上的所有字符

## 编号规则

* `U+十六进制数`表示码点对应一个字符
* 2^16个字符为一平面
  * 1个基本平面(BMP)：`U+0000 ~ U+FFFF`
  * 16个辅助平面：`U+010000 ~ U+10FFFF`

## 编码规则

### UTF-32

使用`4`个字节表示一个符号

* 转换规则简单直观
* 浪费空间

### UTF-16

使用`2`个或`4`字节表示一个符号

* 基本平面的字符用`2`个字节表示
  * `U+D800`到`U+DFFF`之间的码点没有对应字符，被用来映射辅助平面
* 辅助平面的字符用`4`个字节表示
  * 高位在`U+D800`到`U+DBFF`之间
  * 低位在`U+DC00`到`U+DFFF`之间

```
// 将大于U+FFFF的字符，从Unicode转为UTF-16
H = Math.floor((C - 0x10000) / 0x400) + 0xD800
L = (C - 0x10000) % 0x400 + 0xDC00

// 将大于U+FFFF的字符，从UTF-16转为Unicode
C = (H - 0xD800) * 0x400 + L - 0xDC00 + 0x10000
```

### UTF-8

使用`1-4`个字节表示一个符号

* 对于单字节符号，字节的第一位设为`0`，后面7位为这个符号的Unicode码，与ASCII码相同
* 对于n字节的符号，第一个字节的前n位都设为`1`，第n+1位设为`0`，后面字节的前两位一律设为`10`，剩下的为这个符号的Unicode码

```
Unicode符号范围        | UTF-8编码方式
(十六进制)             | (二进制)
----------------------+---------------------------------------------
0000 0000 - 0000 007F | 0xxxxxxx
0000 0080 - 0000 07FF | 110xxxxx 10xxxxxx
0000 0800 - 0000 FFFF | 1110xxxx 10xxxxxx 10xxxxxx
0001 0000 - 0010 FFFF | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
```

### UCS-2

`UTF-16`的一个子集，用`2`个字节表示基本平面的字符
